<app-navbar-principal></app-navbar-principal>

<div class="tracking-container">
  <div class="tracking-card">
    <h2><i class="bi bi-truck"></i> Seguimiento de Pedido</h2>

    <div class="search-box">
      <input
        type="text"
        placeholder="Ingresa tu código de pedido..."
        [(ngModel)]="codigoPedido"
      />
      <button (click)="buscarPedido()">
        <i class="bi bi-search"></i> Buscar
      </button>
    </div>

    <div *ngIf="pedidoEncontrado" class="pedido-info">
      <h4><i class="bi bi-box-seam"></i> Estado del Pedido</h4>
      <p><strong>Código:</strong> {{ pedidoEncontrado.codigo }}</p>
      <p><strong>Cliente:</strong> {{ pedidoEncontrado.cliente }}</p>
      <p><strong>Estado:</strong> {{ pedidoEncontrado.estado }}</p>
      <p><strong>Fecha de Entrega:</strong> {{ pedidoEncontrado.fechaEntrega }}</p>

      <!-- === Línea de progreso con iconos === -->
      <div class="estado-container">
        <div
          class="estado"
          *ngFor="let e of estados; let i = index"
          [class.completado]="i < indiceEstado"
        >
          <div class="icono">
            <i [class]="e.icono"></i>
          </div>
          <p>{{ e.nombre }}</p>
        </div>
      </div>

      <div class="estado-barra">
        <div class="progreso" [ngStyle]="{ width: progreso + '%' }"></div>
      </div>

      <p class="mt-3 fw-semibold">{{ progreso }}% completado</p>
    </div>

    <div *ngIf="pedidoNoEncontrado" class="pedido-error">
      <i class="bi bi-exclamation-triangle-fill"></i>
      Pedido no encontrado. Verifica el código e inténtalo nuevamente.
    </div>
  </div>
</div>
