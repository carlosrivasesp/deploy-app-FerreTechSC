<div class="header">
  <a class="header-title" href="/principal">
    <p class="title"><i class="bi bi-terminal"></i> Ferretería Santo Cristo</p>
  </a>

  <div class="info-gen d-flex">
    <div class="info">
      <a class="userText"> <i class="bi bi-telephone-fill"></i> +51 </a>
    </div>

    <div class="dropdown">
      <a class="userText" role="button">
        <i class="bi bi-person-fill"></i>
        <ng-container *ngIf="isAuthenticated(); else notLoggedIn">
          Hola, {{ user?.nombre }}
        </ng-container>

        <ng-template #notLoggedIn>
          Hola, Invitado
        </ng-template>
      </a>

      <a class="userText" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-caret-down-fill"></i>
      </a>

       <ul class="dropdown-menu">
        <!-- Registrar (solo si no está logueado) -->
        <li *ngIf="!isAuthenticated()">
          <a class="dropdown-item" routerLink="/signup">Registrar</a>
        </li>

        <!-- Iniciar sesión (solo si no está logueado) -->
        <li *ngIf="!isAuthenticated()">
          <a class="dropdown-item" routerLink="/login">Iniciar Sesión</a>
        </li>

        <!-- Cerrar sesión (solo si está logueado) -->
        <li *ngIf="isAuthenticated()">
          <a class="dropdown-item" (click)="logout()">Cerrar Sesión</a>
        </li>
      </ul>
    </div>

  </div>
</div>

<!-- Navbar -->
<nav class="navbar d-flex align-items-center justify-content-between flex-wrap">
  <!-- Menú hamburguesa (solo en pantallas pequeñas) -->
  <button
    class="btn d-lg-none"
    type="button"
    data-bs-toggle="offcanvas"
    data-bs-target="#menuCategorias"
  >
    <i class="bi bi-list fs-4"></i>
  </button>

  <!-- Categorías visibles solo en pantallas grandes -->
  <div class="categories d-none d-lg-flex gap-3">
    <a routerLink="/principal" class="text-dark text-decoration-none">Inicio</a>
    <a routerLink="/catalogo" class="text-dark text-decoration-none"
      >Catálogo</a
    >
    <a routerLink="/nosotros" class="text-dark text-decoration-none"
      >Nosotros</a
    >
    <a routerLink="/historial-carrito" class="text-dark text-decoration-none"
      >Historial</a
    >
  </div>

  <!-- Buscador y carrito -->
  <div class="d-flex align-items-center gap-2">
    <!-- Carrito -->
    <div class="car">
      <a routerLink="/carrito">
        <i class="bi bi-cart-fill fs-4"></i>
        <span class="badge bg-primary">{{ cartItems.length }}</span>
        <!-- Muestra la cantidad de productos -->
      </a>
    </div>
  </div>
</nav>

<!-- Offcanvas Categorías (menú hamburguesa) -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="menuCategorias">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Categorías</h5>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="offcanvas"
    ></button>
  </div>
  <div class="offcanvas-body">
    <a routerLink="/principal" class="d-block mb-2">Inicio</a>
    <a routerLink="/catalogo" class="d-block mb-2">Catálogo</a>
    <a routerLink="/nosotros" class="d-block mb-2">Nosotros</a>
    <a routerLink="/historial-carrito" class="d-block mb-2">Historial</a>
  </div>
</div>