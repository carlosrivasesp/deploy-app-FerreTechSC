<app-header />
<app-sidebar />

<main class="main-content">
  <div class="separador">
    <div class="header-title">
      <a href="/ingresos"><i class="bi bi-arrow-bar-left"></i>Regresar</a>
      <p class="title">Detalle ingreso</p>
    </div>

    <div class="formulario">
      <form class="row g-3" [formGroup]="ingresoForm">
        <!-- Tipo Operaci처n -->
        <div class="col-md-2">
            <label for="inputNro" class="form-label">Tipo Operaci처n</label>
            <input
              type="text"
              class="form-control"
              id="inputNro"
              formControlName="tipoOperacion"
            />
          </div>

            
        <!--fecha Ingreso-->
        <div class="col-md-2">
            <label for="inputEmision" class="form-label">Fecha de Ingreso</label>
            <div class="input-group">
              <span class="input-group-text">
                <i class="bi bi-calendar-event"></i>
              </span>
              <input
                type="text"
                class="form-control"
                id="inputEmision"
                formControlName="fechaIngreso"
              />
            </div>
          </div>
          <!--cantidad total-->
          <div class="col-md-1">
            <label for="inputCantTotal" class="form-label">Cantidad total</label>
            <input
              type="text"
              class="form-control"
              id="inputCantTotal"
              formControlName="cantidadTotal"
            />
          </div>

          <div *ngIf="ingresoForm.get('tipoOperacion')?.value === 'Venta Anulada'" formGroupName="ventaId" class="row g-3">
            <!-- Tipo Comprobante -->
            <div class="col-md-5">
              <label for="inputComprobante" class="form-label">Tipo de Comprobante</label>
              <select
                id="inputComprobante"
                class="form-select"
                formControlName="tipoComprobante"
              >
                <option value="BOLETA DE VENTA ELECTRONICA">BOLETA DE VENTA ELECTRONICA</option>
                <option value="FACTURA DE VENTA ELECTRONICA">FACTURA DE VENTA ELECTRONICA</option>
              </select>
            </div>
          
            <!-- Serie -->
            <div class="col-md-1">
              <label for="inputSerie" class="form-label">Serie</label>
              <input
                type="text"
                class="form-control"
                id="inputSerie"
                formControlName="serie"
              />
            </div>
          
            <!-- Nro Comprobante -->
            <div class="col-md-2">
              <label for="inputNro" class="form-label">N째 Comprobante</label>
              <input
                type="text"
                class="form-control"
                id="inputNro"
                formControlName="nroComprobante"
              />
            </div>
          </div>

          <div *ngIf="ingresoForm.get('tipoOperacion')?.value === 'Compra Registrada'" formGroupName="compraId" class="row g-3">
            <!-- Tipo Comprobante -->
            <div class="col-md-5">
              <label for="inputComprobante" class="form-label">Tipo de Comprobante</label>
              <select
                id="inputComprobante"
                class="form-select"
                formControlName="tipoComprobante"
              >
                <option value="BOLETA DE COMPRA ELECTRONICA">BOLETA DE COMPRA ELECTRONICA</option>
                <option value="FACTURA DE COMPRA ELECTRONICA">FACTURA DE COMPRA ELECTRONICA</option>
              </select>
            </div>
          
            <!-- Serie -->
            <div class="col-md-1">
              <label for="inputSerie" class="form-label">Serie</label>
              <input
                type="text"
                class="form-control"
                id="inputSerie"
                formControlName="serie"
              />
            </div>
          
            <!-- Nro Comprobante -->
            <div class="col-md-2">
              <label for="inputNro" class="form-label">N째 Comprobante</label>
              <input
                type="text"
                class="form-control"
                id="inputNro"
                formControlName="nroComprobante"
              />
            </div>
          </div>
      </form>
    </div>

    <!-- Para ventas -->
    <table
      *ngIf="ingresoForm.get('tipoOperacion')?.value === 'Venta Anulada'"
      class="table"
    >
      <thead>
        <tr class="header">
          <th>Codigo</th>
          <th>Producto</th>
          <th>Cantidad</th>
        </tr>
      </thead>
      <tbody class="body">
        <tr *ngFor="let detalle of detallesVenta.controls">
          <td>{{ detalle.get("codigo")?.value }}</td>
          <td>{{ detalle.get("producto")?.value }}</td>
          <td>{{ detalle.get("cantidad")?.value }}</td>
        </tr>
      </tbody>
    </table>

    <!-- Para compras -->
    <table
      *ngIf="ingresoForm.get('tipoOperacion')?.value === 'Compra Registrada'"
      class="table"
    >
      <thead>
        <tr class="header">
          <th>Codigo</th>
          <th>Producto</th>
          <th>Cantidad</th>
        </tr>
      </thead>
      <tbody class="body">
        <tr *ngFor="let detalle of detallesCompra.controls">
          <td>{{ detalle.get("codigo")?.value }}</td>
          <td>{{ detalle.get("producto")?.value }}</td>
          <td>{{ detalle.get("cantidad")?.value }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</main>
